#役割
あなたは、HTML/CSS/Javascriptでのフロントエンド開発を得意とするプロフェッショナルな開発者です。
次の仕様書に基づいて、ソースコードを書いて下さい。

#要求
・フロントエンドのみで機能する、書籍データ登録システムを開発して下さい。
・ソースはHTML/CSS/Javascriptで記述し、一つのファイルにまとめて下さい。
・登録する書籍データは下記です。
    ・InstanceID（TEXT）～登録時の年月日と時刻より、YYMMDD_HHMMSSの形式で生成
    ・ISBN（TEXT）～International Standard Book Numberの略でユーザーがマニュアル入力
    ・Title（TEXT）～　書籍名称でユーザーがマニュアル入力
    ・Author（TEXT）～　著者名でユーザーがマニュアル入力
    ・Publisher（TEXT）～　出版社名でユーザーがマニュアル入力
    ・IssueYear（TEXT）～　発行年でユーザーがマニュアル入力
    ・Price(CURRENCY)～　価格でユーザーがマニュアル入力
・サンプルとして疑似書籍データを10セット作成して下さい。

作成いただいたbook_registration.html を改造します。現在は
ユーザーがInstanceID以外の項目をマニュアル入力する仕様です。
これをISBNをキーとして国立国会図書館サーチAPIを使い書籍データを
取得、各項目に入力するよう変更して下さい。国立国会図書館サーチAPIの
仕様は下記リンク先をご参照下さい。
https://ndlsearch.ndl.go.jp/help/api/specifications
また、参考記事として下記リンク先もご検討下さい。
https://qiita.com/310kent0/items/ac04d35befffac6b695e


まだ、書籍分類が記録できません。htmlを見ると    103行104行が
        <label for="category">書籍分類:</label>
        <input type="text" id="category" name="category" readonly><br><br> {/* Added readonly category field */}
とあります。category欄がreadonlyなため書き込めないのではないでしょうか？ブラウザ画面でも書籍分類欄はグレー表示され
他の欄とは見た目が異なります。

/templates/book_registration.htmlを変更します。
１．画面右上に「場所」とラベルを貼り、その横にデータベースlibrariesのt04_locationsテーブルに接続するコンボボックスを配置します。
　　このコンボボックスのトグルボタンを押すと t04_locationsのカラムlibrary_nameを表示し、ユーザーが選択できるようにして下さい。
→　残念ながらコンボボックスに幅がなく、またトグルボタンを押してt04_locations テーブルのカラムlibrary_nameを一覧することが出来ません。確認して修正を検討して下さい。

→　説明不足だったようです。申し訳ありません。現在、コンボボックスを動的に生成する記述は/book_registration.html の関数
async function registerBook関数の中に書かれているようです。しかし、このコンボボックスを使うタイミングは書籍データを登録する
より前です。国立国会図書館ＡＰＩを使うよりも前、　/book_registration.htmlが読み込まれた直後にユーザーが選択する前提で設計し直して下さい。

/templates/book_registration.htmlの document.addEventListener('DOMContentLoaded', async function() {}ブロックは
第173行目から第195行目に移し、async function registerBook関数内では第445行目で値を受けとるようにしました。
第177行目でfetch('api/locations') とありますが、app.pyにもlocation_util.pyにも'api/locations'の定義は見当たりません。
'api_locations'について検証して下さい。

先ほどは私の見落としで失礼しました。コンボボックスでt04_locationsテーブルから選択するregister_administrator.htmlとbook_registration.htmlを比較すると
register_administrator.htmlの第67行目から第80行目までのブロックと、それに対応すると思われる第100行目から第103行目までのブロックでは違いが大きいように
思います。この点を検証していただけますか？

まだコンボボックスからt04_locationsの値を選択することが出来ません。ブラウザの開発者ツールのコンソールを見ると/templates/book=registration.htmlの
第448行目に対し、Uncaught SyntaxError: Unexpected token 'const' というエラーがでています。この件をご確認いただきたく宜しくお願い致します。

私の編集ミスをマニュアルで修正し、コンボボックスでのlocationの選択が動作するようになりました。次に、このコンボボックスで選択したlocationを
book_util.pyのdef register_instance_data関数でt00_instance_idsテーブルに書き込む時の カラムlocate_now 及び locate_initの値として下さい。
書き込む前にコンボボックスで選択したlocationと socket.gethostname()関数で得たpc_nameよりt04_locationsテーブルの対応するカラムlocationの値が
異なる場合、showCustomAlert関数でflagButtons === 3　で表示、「選択した場所とPC名が一致しません。選択した場所で登録する場合「はい」、PC名の場所で
登録する場合、「いいえ」、登録を中止する場合「キャンセル」を押して下さい」と表示、各ボタンにそのような動作を付与して下さい。

現在のプログラムは/templates/book_registration.html を画面表示すると、その第208行目で呼び出すmy_messagebox.htmlがいきなり開きます。これは
コンボボックスlocationSelectの初期値と、t04_locationsテーブルをPC名をキーに取得したlocationカラムの値が一致しないためです。そこで
第２０８行目でmy_messageboxがいきなり開かないように、コンボボックスlocationSelectの初期値を、ＰＣ名をキーにt04_locationsテーブルのlocationカラムから
取得した値に一致させるようにプログラムを修正して下さい。

/templates/book_registration.htmlを表示したとき、画面左上のコンボボックスでt04_locationsテーブルの値が選択されます。このコンボボックスの値がロード時及び更新時に
決まった時、t04_locationsテーブルの該当するカラムcategory_tableの値をチェック、その値が't07_categories_ndc'に等しくない場合、画面上の
「書籍分類」タグの下に「独自分類」タグを表示、その中には「独自分類」ラベルとt04_locationsテーブルの該当するカラムcategory_tableの名前に一致する
テーブル名のテーブル(t07_categories_port_sc, またはt07_categories_port_scmm)のカラムcategory_id及びcategoryを選択肢とするコンボボックスを
表示するようにして下さい。

ありがとうございます。/templates/book_registration.htmlの第265行目に`/api/location_category_table?location=${selectedLocation}`とあります。
これに対応するAPIの定義がapp.pyにあるか確認して下さい。

/templates/book_registration.htmlの第280行目に`/api/categories?table_name=${categoryTable}`とあります。
これに対応するAPIがapp.pyにあるか確認して下さい。